<div class="profile pd-40">
    <div class="flex">
        <div class="column flex direct-column">
            <div class="column">
                <canvas id="skin"></canvas>
            </div>
        </div>
        <div class="column w-100 flex justif-end gap-15 direct-column">
            <div class="flex justif-between">
                <div><h2 class="underline session__username"><%= session.username %></h2></div>
                <div>
                    <a href="#logout" id="logout" class="btn btn-danger">Se Déconnecter</a>
                </div>
            </div>
            <div class="card black-4 w-100 mb-30">
                <div class="card-body flex gap-15 align-center">
                    <div class="column">
                        <img src="asset://img/icons/money.png" width="24" height="24" alt="money" />
                    </div>
                    <div class="column flex align-center">
                        <h2 class="infos session__money reset-mp">
                            <span class="key"><%= session.money %></span><span class="text-gray">Points Boutique</span>
                        </h2>
                    </div>
                </div>
            </div>
            <h2 class="underline">Autre Information</h2>
            <div class="card black-4 w-100">
                <div class="card-body justif-center flex gap-15 direct-column">
                    <div class="flex gap-15">
                        <div class="column">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" >
                                <g clip-path="url(#clip0_1053_3896)">
                                    <path d="M23.954 5.54199L15.536 13.96C14.5974 14.8963 13.3257 15.422 12 15.422C10.6743 15.422 9.40263 14.8963 8.464 13.96L0.046 5.54199C0.032 5.69999 0 5.84299 0 5.99999V18C0.00158786 19.3256 0.528882 20.5964 1.46622 21.5338C2.40356 22.4711 3.6744 22.9984 5 23H19C20.3256 22.9984 21.5964 22.4711 22.5338 21.5338C23.4711 20.5964 23.9984 19.3256 24 18V5.99999C24 5.84299 23.968 5.69999 23.954 5.54199Z" fill="var(--text)"/>
                                    <path d="M14.122 12.546L23.256 3.411C22.8135 2.67732 22.1895 2.07004 21.444 1.64773C20.6985 1.22542 19.8568 1.00234 19 1H5.00002C4.14324 1.00234 3.30152 1.22542 2.55605 1.64773C1.81057 2.07004 1.1865 2.67732 0.744019 3.411L9.87802 12.546C10.4416 13.1073 11.2046 13.4225 12 13.4225C12.7954 13.4225 13.5584 13.1073 14.122 12.546Z" fill="var(--text)"/>
                                </g>
                                <defs>
                                    <clipPath id="clip0_1053_3896">
                                        <rect width="24" height="24" fill="var(--text)" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                        <div class="column flex align-center">
                            <h2 class="infos session__email reset-mp">
                                <span class="text-gray">Adresse Mail</span><span class="key"><%= session.email %></span>
                            </h2>
                        </div>
                    </div>
                    <div class="flex gap-15">
                        <div class="column">
                            <svg style="width: 24px;fill: white;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                                <path d="M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"/>
                            </svg>
                        </div>
                        <div class="column flex align-center">
                            <h2 class="infos session__email reset-mp">
                                <span class="text-gray">Rôle</span><span class="key"><%= session.role.name %></span>
                            </h2>
                        </div>
                    </div>
                    <div class="flex gap-15">
                        <div class="column">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_1053_3902)">
                                    <path d="M0 19C0.00158786 20.3256 0.528882 21.5964 1.46622 22.5338C2.40356 23.4711 3.6744 23.9984 5 24H19C20.3256 23.9984 21.5964 23.4711 22.5338 22.5338C23.4711 21.5964 23.9984 20.3256 24 19V10H0V19ZM17 14.5C17.2967 14.5 17.5867 14.588 17.8334 14.7528C18.08 14.9176 18.2723 15.1519 18.3858 15.426C18.4993 15.7001 18.5291 16.0017 18.4712 16.2926C18.4133 16.5836 18.2704 16.8509 18.0607 17.0607C17.8509 17.2704 17.5836 17.4133 17.2926 17.4712C17.0017 17.5291 16.7001 17.4994 16.426 17.3858C16.1519 17.2723 15.9176 17.08 15.7528 16.8334C15.588 16.5867 15.5 16.2967 15.5 16C15.5 15.6022 15.658 15.2206 15.9393 14.9393C16.2206 14.658 16.6022 14.5 17 14.5ZM12 14.5C12.2967 14.5 12.5867 14.588 12.8334 14.7528C13.08 14.9176 13.2723 15.1519 13.3858 15.426C13.4994 15.7001 13.5291 16.0017 13.4712 16.2926C13.4133 16.5836 13.2704 16.8509 13.0607 17.0607C12.8509 17.2704 12.5836 17.4133 12.2926 17.4712C12.0017 17.5291 11.7001 17.4994 11.426 17.3858C11.1519 17.2723 10.9176 17.08 10.7528 16.8334C10.588 16.5867 10.5 16.2967 10.5 16C10.5 15.6022 10.658 15.2206 10.9393 14.9393C11.2206 14.658 11.6022 14.5 12 14.5ZM7 14.5C7.29667 14.5 7.58668 14.588 7.83336 14.7528C8.08003 14.9176 8.27229 15.1519 8.38582 15.426C8.49935 15.7001 8.52906 16.0017 8.47118 16.2926C8.4133 16.5836 8.27044 16.8509 8.06066 17.0607C7.85088 17.2704 7.58361 17.4133 7.29264 17.4712C7.00166 17.5291 6.70006 17.4994 6.42597 17.3858C6.15189 17.2723 5.91762 17.08 5.7528 16.8334C5.58797 16.5867 5.5 16.2967 5.5 16C5.5 15.6022 5.65804 15.2206 5.93934 14.9393C6.22064 14.658 6.60218 14.5 7 14.5V14.5Z" fill="var(--text)"/>
                                    <path d="M19 2H18V1C18 0.734784 17.8946 0.48043 17.7071 0.292893C17.5196 0.105357 17.2652 0 17 0C16.7348 0 16.4804 0.105357 16.2929 0.292893C16.1054 0.48043 16 0.734784 16 1V2H8V1C8 0.734784 7.89464 0.48043 7.70711 0.292893C7.51957 0.105357 7.26522 0 7 0C6.73478 0 6.48043 0.105357 6.29289 0.292893C6.10536 0.48043 6 0.734784 6 1V2H5C3.6744 2.00159 2.40356 2.52888 1.46622 3.46622C0.528882 4.40356 0.00158786 5.6744 0 7L0 8H24V7C23.9984 5.6744 23.4711 4.40356 22.5338 3.46622C21.5964 2.52888 20.3256 2.00159 19 2V2Z" fill="var(--text)"/>
                                </g>
                                    <defs>
                                    <clipPath id="clip0_1053_3902">
                                        <rect width="24" height="24" fill="var(--text)" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </div>
                        <div class="column flex align-center">
                            <h2 class="infos session__createdAt reset-mp">
                                <span class="text-gray">Compte créé le</span><span class="key"><%= session.created_at %></span>
                            </h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="flex direct-column gap-15 pt-30">
        <div id="profile-appearance"></div>
    </div>
</div>
<script>
    var appRoot = require('app-root-path');
    const Profile = require(path.join(appRoot.path, "/src/assets/js/connected/profile.js"))
    var profile = new Profile();

    function loadProfileTab(tab){
        var link = tab;
        var data = [{session: userSession}]
        FZUtils.initVariableEJS(data, false).then((datar) => {
            ejs.renderFile(appRoot.path+"/src/template/connected/profile/subpage/"+link.replaceAll('#', '').replaceAll('profile-', '')+".ejs", datar, {}, (err, str) => {
                if (err) return console.log(err)
                $(link).html(str)
            })
        })
    }

    
    loadProfileTab("#profile-appearance")

    /*var triggerProfileTabList = [].slice.call(document.querySelectorAll('#pills-tab a'))
    triggerProfileTabList.forEach(function (triggerEl) {
        var tabProfileTrigger = new bootstrap.Tab(triggerEl)

        //LOAD FIRST SUBPAGE ACTIVE DEFAULT
        if(triggerEl.getAttribute('class').includes('active')){
            var link = triggerEl.getAttribute('data-bs-target');
            loadTab(triggerEl, "#appearance")
            tabProfileTrigger.show()
        }

        triggerEl.addEventListener('click', function (event) {
            event.preventDefault()
            $('.tab-pane.show.active').removeClass('show')
            $('.tab-pane.active').removeClass('active')
            if(!triggerEl.hasAttribute("aload")) {
                loadTab(triggerEl, triggerEl.getAttribute('data-bs-target'))
            }
            tabProfileTrigger.show()
        })
    })*/
</script>
